<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>dsm.cor. dsm 2.1.3</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="
  David L. Miller
">

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/highlight.css" rel="stylesheet">
<link href="css/staticdocs.css" rel="stylesheet">

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#">dsm 2.1.3</a>
      <div class="nav">
        <ul class="nav">
          <li><a href="index.html"><i class="icon-home icon-white"></i> Index</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container">
      <header>
        
      </header>
      
      <h1>Check for autocorrelation in residuals</h1>

<div class="row">
  <div class="span8">
    <h2>Usage</h2>
    <pre>dsm.cor(dsm.obj, Transect.Label = "Transect.Label", Segment.Label = "Segment.Label", 
  max.lag = 10, resid.type = "scaled.pearson", fun = cor, ylim = c(0, 1), subset = "all", 
      ...)</pre>
    
    <h2>Arguments</h2>
    <dl>
      <dt>dsm.obj</dt>
      <dd>a fitted dsm object.</dd>
      <dt>Transect.Label</dt>
      <dd>label for the transect (default:
  <code>Transect.Label</code>). Using different labels can be
  useful when transects are split over geographical
  features or when transects are surveyed multiple times.</dd>
      <dt>Segment.Label</dt>
      <dd>label for the segments (default:
  <code>Segment.Label</code>).The result of calling
  <code>order()</code> must make sense.</dd>
      <dt>resid.type</dt>
      <dd>the type of residuals used, see
  <code><a href='http://www.inside-r.org/r-doc/mgcv/residuals.gam'>residuals.gam</a></code> and
  <code><a href='http://www.inside-r.org/r-doc/mgcv/residuals.gam'>residuals.gam</a></code>. Defaults to
  <code>"scaled.pearson"</code> in the GAM case and
  <code>"normalized"</code> in the GAMM case (which are
  equivalent).</dd>
      <dt>fun</dt>
      <dd>the function to use, by default
  <code><a href='http://www.inside-r.org/r-doc/stats/cor'>cor</a></code>, must take two column vectors as
  arguments.</dd>
      <dt>max.lag</dt>
      <dd>maximum lag to calulate at.</dd>
      <dt>ylim</dt>
      <dd>user defined limits in y direction.</dd>
      <dt>subset</dt>
      <dd>which subset of the data should the
  correlation function be calculated on?</dd>
      <dt>...</dt>
      <dd>other options to pass to <code>plot</code>.</dd>
    </dl>
    
    <div class="Value">
      <h2>Value</h2>
      
      <p>a plot or a vector of <code>fun</code> applied at the lags.</p>
  
    </div>

    <div class="Description">
      <h2>Description</h2>
      
      <p>Once a DSM has been fitted to data, this function can be
  used to check for autocorrelation in the residuals.</p>
  
    </div>

    <div class="Details">
      <h2>Details</h2>
      
      <p>Within each <code>Transect.Label</code>, segments will be
  sorted according to their <code>Segment.Labels</code>. This may
  require some time to get right for your particular data.
  If one has multiple surveys where transects are
  revisited, for example, one may want to make
  <code>Transect.Label</code> a unique transect-survey id.
  Neither label need to be included in the model, they must
  just be present in the <code>$data</code> field in the model.
  This usually means that they have to be in the segment
  data passed to <code>dsm</code>.</p>
  
      <p>The current iteration of this function will only plot
  correlations nicely, other things are up to you but you
  can get the function to return the data (by assigning the
  result to an object).</p>
  
      <p>If there are NA values in the residuals then the
  correlogram will not be calculated. This usually occurs
  due to NA values in the covariates (so the smoother will
  not have fitted values there). Code like
  `any(is.na(dsm.obj$data))` might be helpful.</p>
  
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples"><div class='input'>library(Distance)
</div>
<strong class='message'>Loading required package: optimx</strong>
<strong class='message'>Loading required package: numDeriv</strong>
<strong class='message'>
Attaching package: ‘optimx’
</strong>
<strong class='message'>The following object is masked from ‘package:nlme’:

    coef<-
</strong>
<strong class='message'>Loading required package: Rsolnp</strong>
<strong class='message'>Loading required package: truncnorm</strong>
<strong class='message'>Loading required package: parallel</strong>
<div class='input'> library(dsm)

 data(mexdolphins)

 hr.model <- ds(mexdolphins$distdata, max(mexdolphins$distdata$distance),
                key = "hr", adjustment = NULL)
</div>
<strong class='message'>Fitting hazard-rate key function</strong>
<strong class='message'>AIC= 841.253</strong>
<strong class='message'>No survey area information supplied, only estimating detection function.
</strong>
<div class='input'> mod1<-dsm(N~s(x,y), hr.model, mexdolphins$segdata, mexdolphins$obsdata)
</div>
<strong class='warning'>Warning message:
the condition has length > 1 and only the first element will be used</strong>
<div class='input'>
 dsm.cor(mod1,resid.type="d",max.lag=9,Segment.Label="Sample.Label")
</div>
<p><img src='dsm.cor-16.png' alt='' width='400' height='400' /></p></pre>
  </div>
  <div class="span4">
    <!-- <ul>
      <li>dsm.cor</li>
    </ul>
    <ul>
      
    </ul> -->
      
    
    <h2>Author</h2>
    
  David L. Miller

    
  </div>
</div>
      
      <footer>
      <p class="pull-right"><a href="#">Back to top</a></p>
<p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="http://twitter.github.com/bootstrap">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>